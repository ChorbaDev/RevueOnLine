import java.sql.*;

public class metier.Abonnement {
	private int id;
	private java.sql.Date date_debut;
	private java.sql.Date date_fin;
	int id_client;
	int id_revue;
	
	private metier.Connexion maConnexion;
	private  Connection connect;
	
	public metier.Abonnement(String deb,String fin, int id_c,int id_r) {
		java.util.Date dateD = new java.util.Date(deb);
		java.util.Date dateF = new java.util.Date(fin);
		date_debut = new java.sql.Date(dateD.getTime());
		date_fin = new java.sql.Date(dateF.getTime());
		id_client=id_c;
		id_revue=id_r;
		
		maConnexion= new metier.Connexion();
	    connect=maConnexion.creeConnexion();
	}
	
	public void addAbonnement() throws SQLException {
		String sql="insert into metier.Abonnement(date_debut,date_fin,id_client,id_revue) values (?,?,?,?)";
		PreparedStatement requete=connect.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);
		requete.setDate(1, date_debut);
		requete.setDate(2, date_fin);
		requete.setInt(3, id_client);
		requete.setInt(4, id_revue);
		int nbLignes=requete.executeUpdate();
		ResultSet res=requete.getGeneratedKeys();
		if(res.next()) {
			id=res.getInt(1);
		}
	}
}
